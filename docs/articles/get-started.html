<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started • unhcrdataportal</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started">
<meta property="og:description" content="unhcrdataportal">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">unhcrdataportal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/get-started.html">Get started</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="get-started_files/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="get-started_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="get-started_files/datatables-binding-0.27/datatables.js"></script><link href="get-started_files/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="get-started_files/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="get-started_files/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="get-started_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="get-started_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started</h1>
            
      
      
      <div class="hidden name"><code>get-started.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">unhcrdataportal</span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_full.Rmd: do not edit by hand -->
<!-- Run this 'development' chunk -->
<!-- Store every call to library() that you need to explore your functions -->
<!--
 You need to run the 'description' chunk in the '0-dev_history.Rmd' file before continuing your code there.

If it is the first time you use {fusen}, after 'description', you can directly run the last chunk of the present file with inflate() inside.
-->
<!--

# There can be development actions

Create a chunk with 'development' actions

- The chunk needs to be named `development` or `dev`
- It contains functions that are used for package development only
- Note that you may want to store most of these functions in the 0-dev_history.Rmd file

These are only included in the present flat template file, their content will not be part of the package anywhere else.
-->
<p>This package include only one function called <code>odp</code>. The
function is then made available through a shinyApp.</p>
<p>Beyond the function, this vignette is an opportunity to demonstrate
how to turn an initial script into a package as the original idea came
from from this <code>script</code>:</p>
<p><strong>Why is it worth documenting your function as
package?</strong></p>
<p>According to <a href="https://chat.openai.com/share/1d1ab05a-53e4-4643-adeb-9f64ad926bbe" class="external-link">chatGPT</a>,
Documenting R functions as packages provides several benefits:</p>
<ul>
<li><p><strong>Reproducibility and Maintainability</strong>: Packages
encapsulate the code, data, and documentation required to perform a
specific task or provide a set of functionalities. By documenting your R
functions within a package, you ensure that the code is self-contained
and can be easily shared and reproduced by others. This helps maintain
the integrity of your code and simplifies the process of maintaining and
updating it over time.</p></li>
<li><p><strong>Ease of Use</strong>: Documenting your functions within a
package allows you to provide clear and comprehensive documentation,
including details about the function’s purpose, arguments, return
values, and usage examples. This makes it easier for other users
(including yourself in the future) to understand how to use your
functions effectively. Well-documented packages increase the
discoverability and accessibility of your code, making it more likely to
be adopted and utilized by others.</p></li>
<li><p><strong>Collaboration and Community Contribution</strong>: By
creating a package with documented functions, you can encourage
collaboration within the R community. Others can easily install and use
your package, providing feedback, suggesting improvements, and even
contributing their own enhancements or bug fixes. Documentation is
crucial for enabling others to understand your codebase and contribute
effectively, fostering an active and vibrant community around your
package.</p></li>
<li><p><strong>Versioning and Dependency Management</strong>:
Documenting your R functions within a package allows you to manage
versioning and dependencies more effectively. Packages can specify the
version requirements for other packages they rely on, ensuring that
users have the correct versions installed to avoid compatibility issues.
This helps maintain the reproducibility of your code across different
environments and simplifies the process of managing package
dependencies.</p></li>
<li><p><strong>Integration with R Ecosystem</strong>: Packaging your
functions makes it easier to integrate them with other tools and
libraries in the R ecosystem. R packages can leverage existing packages
and take advantage of their functionality, creating a more cohesive and
interconnected ecosystem. By documenting your functions within a
package, you contribute to this ecosystem and enable seamless
integration with other tools and workflows.</p></li>
</ul>
<p>Overall, documenting R functions within a package brings structure,
reproducibility, ease of use, collaboration opportunities, and
integration capabilities. It enhances the accessibility,
maintainability, and adoption potential of your code, benefiting both
yourself and the wider R community.</p>
<div class="section level2">
<h2 id="odp">odp<a class="anchor" aria-label="anchor" href="#odp"></a>
</h2>
<p>What does it take to turn a script into a documented package?</p>
<ul>
<li><p>Install <a href="https://thinkr-open.github.io/fusen/" class="external-link">FUSEN</a>
package</p></li>
<li><p>Start a project as a FUSEN</p></li>
<li><p>document the <a href="">0-dev_history.Rmd</a> to initialize the
package</p></li>
<li><p>during the process associate it with a github repostory that you
have created</p></li>
<li><p>get into the function and prefix all the function with package
they comes from - while doing this document them as
<code>@importFrom</code></p></li>
<li><p>document the function parameters <code>@param</code></p></li>
<li><p>review the function and insert comments within the script to
explain what you are doing in the script - actually chatGPT is quite
effective to help you doing this</p></li>
<li><p>then go to the chunk examples - and document examples. Make sure
you document your example and link them to practical use cases. Assumes
that your target users has little knowledge of the context</p></li>
<li><p>then set up a few unit testing - actually chatGPT is quite
effective to help you doing this</p></li>
<li><p>inflate your fusen markdown</p></li>
<li><p>add a global file with the following #
remotes::install_github(“thinkr-open/checkhelper”)
<code><a href="https://thinkr-open.github.io/checkhelper/reference/print_globals.html" class="external-link">checkhelper::print_globals()</a></code></p></li>
<li><p>review your readme.Rmd and inject back there your business use
cases</p></li>
<li><p>build the companion website for the documentation with
<code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code></p></li>
<li><p>push back everything to github</p></li>
</ul>
<p>Et voila…</p>
<!--
Create a chunk for the core of the function

- The chunk needs to be named `function` at least
- It contains the code of a documented function
- The chunk can also be named `function-my_median` to make it easily
findable in your Rmd
- Let the `@examples` part empty, and use the next `examples` chunk instead to present reproducible examples

After inflating the template

-  This function code will automatically be added in a new file in the "R/" directory
-->
<!--
Create a chunk with an example of use for your function

- The chunk needs to be named `examples` at least
- It contains working examples of your function
- The chunk is better be named `examples-my_median` to be handled
correctly when inflated as a vignette

After inflating the template

-  This example will automatically be added in the '@examples' part of our function above in the "R/" directory
- This example will automatically be added in the vignette created from this Rmd template
-->
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Use as</span></span>
<span></span>
<span><span class="co">## odp(): to retrieve an overview of all available situation pages</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/odp.html">odp</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>         <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">page_type</span> <span class="op">==</span><span class="st">"situation"</span> <span class="op">)</span></span>
<span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span> <span class="va">page_name</span>,<span class="va">page_url</span><span class="op">)</span>,</span>
<span>              options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c4c533fd86a69d55182a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c4c533fd86a69d55182a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Afghanistan situation","Burundi Situation","CCCM Northern Syria Overview","CCCM Somalia Overview","Central African Republic Regional Response","Central America &amp; Mexico","COVID-19","DRC Situation","Eradication of Statelessness in the East and Horn of Africa, and the Great Lakes Region","Horn of Africa Somalia Situation","Mali Situation","Mediterranean Situation","Multi Country Office (MCO) Panama","Myanmar Situation","Nigeria Situation","Organizations led by forcibly displaced and stateless people","Refugee Response in Bangladesh","Regional Bureau for Asia and the Pacific","Regional Bureau for Southern Africa","Regional Bureau for the East and Horn of Africa, and the Great Lakes Region","Regional Bureau for West and Central Africa","Sahel Crisis","South Eastern Europe","South Sudan","Sudan situation","Syria Regional Refugee Response","Syria Regional Refugee Response: Durable Solutions","Ukraine CCCM","Ukraine Refugee Situation","Venezuela Situation","Voluntary Return of Ivorian Refugees","Yemen CCCM Overview"],["https://data.unhcr.org/en/situations/afghanistan","https://data.unhcr.org/en/situations/burundi","https://data.unhcr.org/en/situations/cccm_northsyriaxb","https://data.unhcr.org/en/situations/cccm_somalia","https://data.unhcr.org/fr/situations/car","https://data.unhcr.org/es/situations/cam","https://data.unhcr.org/en/situations/covid-19","https://data.unhcr.org/en/situations/drc","https://data.unhcr.org/en/situations/statelessgl","https://data.unhcr.org/en/situations/horn","https://data.unhcr.org/en/situations/malisituation","https://data.unhcr.org/en/situations/mediterranean","https://data.unhcr.org/en/situations/mcopanama","https://data.unhcr.org/en/situations/myanmar","https://data.unhcr.org/en/situations/nigeriasituation","https://data.unhcr.org/en/situations/repository-organisations-led-by-forcibly-displaced-and-stateless","https://data.unhcr.org/en/situations/myanmar_refugees","https://data.unhcr.org/en/situations/rbap","https://data.unhcr.org/en/situations/rbsa","https://data.unhcr.org/en/situations/rbehagl","https://data.unhcr.org/en/situations/rbwca","https://data.unhcr.org/en/situations/sahelcrisis","https://data.unhcr.org/en/situations/southeasterneurope","https://data.unhcr.org/en/situations/southsudan","https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/syria","https://data.unhcr.org/en/situations/syria_durable_solutions","https://data.unhcr.org/en/situations/ukraine_cccm","https://data.unhcr.org/en/situations/ukraine","https://data.unhcr.org/en/situations/vensit","https://data.unhcr.org/en/situations/ivorianreturnee","https://data.unhcr.org/en/situations/yemen_cccm"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>page_name<\/th>\n      <th>page_url<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>

## to retrieve the datasets for a specific country /situation
 
datasit </div>
<script type="application/json" data-for="htmlwidget-2120c57e6dadbb996be6">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["situation","situation","situation","situation"],["Sudan situation","Sudan situation","Sudan situation","Sudan situation"],["https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/sudansituation"],["population","population","population","population"],["Total newly arrived refugees, asylum seekers, and returnees","Total newly arrived refugees/asylum seekers","Total newly arrived refugee returnees","IDPs in Sudan * "],["https://data.unhcr.org/population/?widget_id=414624&amp;sv_id=63&amp;population_group=5550,5551","https://data.unhcr.org/population/?widget_id=414625&amp;sv_id=63&amp;population_group=5550","https://data.unhcr.org/population/?widget_id=414626&amp;sv_id=63&amp;population_group=5551","https://data.unhcr.org/population/?widget_id=414627&amp;sv_id=63&amp;population_group=5552"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>page_type<\/th>\n      <th>page_name<\/th>\n      <th>page_url<\/th>\n      <th>dataset_type<\/th>\n      <th>dataset_name<\/th>\n      <th>dataset_url<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>

## to retrieve a specific dataset on the given page as a parsed JSON
# odp(page, dataset)
page  
  ## extract the data
  purrr::map( "data") |&gt;
  ## Bind together in a data frame
  purrr::list_rbind()

## plotting quickly the results... 
library(ggplot2)
datasitpop |&gt;
  ggplot() +
  geom_col(aes(x = as.integer(individuals),
               y = reorder( glue::glue("{population_group_name} \n as of {date}"), 
                                        as.integer(individuals) )),
           fill = unhcrthemes::unhcr_pal(n = 1, "pal_blue"),
           width = 0.8) +
  labs(title = paste0(page),
       x = "Number of people",
       y = "",
       caption = "Source: https://data.unhcr.org/en/situations \n
                   © UNHCR, The UN Refugee Agency") +
  scale_x_continuous(expand = expansion(c(0, 0.1)),
                     breaks = scales::pretty_breaks(n = 7),
                     labels = scales::label_number(scale_cut = scales::cut_short_scale())) +
  unhcrthemes::theme_unhcr(
              font_size = 12,
              grid = "X",
              axis = "y")
<p><img src="get-started_files/figure-html/example-odp-3.png" width="700"></p>
<!--
Create a chunk with a test of use for your function

- The chunk needs to be named `tests` at least
- It contains working tests of your function
- The chunk is better be named `tests-my_median` to be handled
correctly when inflated as a vignette

After inflating the template

-  This test code will automatically be added in the "tests/testthat/" directory
-->
</div>
<div class="section level2">
<h2 id="run_app">run_app<a class="anchor" aria-label="anchor" href="#run_app"></a>
</h2>
<p>if you want to widen your package audience, make your function
available through a web interface so that users can avoid rstudio
desktop installation :</p>
<ul>
<li><p>create a Shiny App function called <code><a href="../reference/run_app.html">run_app()</a></code> that
will display some interactivity around your function</p></li>
<li><p>Set up a launcher <code>app.R</code> script at the root of the
package</p></li>
<li><p>Use the launcher to deploy it to UNHCR rstudio server: <a href="http://rstudio.unhcr.org" class="external-link uri">http://rstudio.unhcr.org</a></p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## Run the shiny App </span></span>
<span><span class="co"># run_app()</span></span></code></pre></div>
<!--

# Inflate your package

You're one inflate from paper to box.
Build your package from this very Rmd using `fusen::inflate()`

- Verify your `"DESCRIPTION"` file has been updated
- Verify your function is in `"R/"` directory
- Verify your test is in `"tests/testthat/"` directory
- Verify this Rmd appears in `"vignettes/"` directory
-->
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Hisham Galal, Edouard Legoupil.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</body>
</html>
