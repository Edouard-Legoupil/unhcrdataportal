<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Retrieve data from UNHCR Operational Data Portal — odp • unhcrdataportal</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve data from UNHCR Operational Data Portal — odp"><meta property="og:description" content="This function pulls key information from the portal"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- dependencies from examples --><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet"><script src="libs/datatables-binding-0.27/datatables.js"></script><link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet"><link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet"><script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet"><script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">unhcrdataportal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/get-started.html">Get started</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Retrieve data from UNHCR Operational Data Portal</h1>
    
    <div class="hidden name"><code>odp.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function pulls key information from the portal</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">odp</span><span class="op">(</span>page <span class="op">=</span> <span class="cn">NULL</span>, dataset <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>page</dt>
<dd><p>aka the name of the situation</p></dd>


<dt>dataset</dt>
<dd><p>one of the following: "population", "population_x_time",
"population_x_location",  "population_x_origin",
"population_x_location2",  "demographics",  "demographics"</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a frame with data</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p><a href="https://data.unhcr.org/" class="external-link">UNHCR Operational Data Portal</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Use as</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## odp(): to retrieve an overview of all available situation pages</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">odp</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>         <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">page_type</span> <span class="op">==</span><span class="st">"situation"</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span> <span class="va">page_name</span>,<span class="va">page_url</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<div id="htmlwidget-7d1d8061d826d714c340" style="width:700px;height:432.632880098888px;" class="datatables html-widget "></div>
<script type="application/json" data-for="htmlwidget-7d1d8061d826d714c340">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Afghanistan situation","Burundi Situation","CCCM Northern Syria Overview","CCCM Somalia Overview","Central African Republic Regional Response","Central America &amp; Mexico","COVID-19","DRC Situation","Eradication of Statelessness in the East and Horn of Africa, and the Great Lakes Region","Horn of Africa Somalia Situation","Mali Situation","Mediterranean Situation","Multi Country Office (MCO) Panama","Myanmar Situation","Nigeria Situation","Organizations led by forcibly displaced and stateless people","Refugee Response in Bangladesh","Regional Bureau for Asia and the Pacific","Regional Bureau for Southern Africa","Regional Bureau for the East and Horn of Africa, and the Great Lakes Region","Regional Bureau for West and Central Africa","Sahel Crisis","South Eastern Europe","South Sudan","Sudan situation","Syria Regional Refugee Response","Syria Regional Refugee Response: Durable Solutions","Ukraine CCCM","Ukraine Refugee Situation","Venezuela Situation","Voluntary Return of Ivorian Refugees","Yemen CCCM Overview"],["https://data.unhcr.org/en/situations/afghanistan","https://data.unhcr.org/en/situations/burundi","https://data.unhcr.org/en/situations/cccm_northsyriaxb","https://data.unhcr.org/en/situations/cccm_somalia","https://data.unhcr.org/fr/situations/car","https://data.unhcr.org/es/situations/cam","https://data.unhcr.org/en/situations/covid-19","https://data.unhcr.org/en/situations/drc","https://data.unhcr.org/en/situations/statelessgl","https://data.unhcr.org/en/situations/horn","https://data.unhcr.org/en/situations/malisituation","https://data.unhcr.org/en/situations/mediterranean","https://data.unhcr.org/en/situations/mcopanama","https://data.unhcr.org/en/situations/myanmar","https://data.unhcr.org/en/situations/nigeriasituation","https://data.unhcr.org/en/situations/repository-organisations-led-by-forcibly-displaced-and-stateless","https://data.unhcr.org/en/situations/myanmar_refugees","https://data.unhcr.org/en/situations/rbap","https://data.unhcr.org/en/situations/rbsa","https://data.unhcr.org/en/situations/rbehagl","https://data.unhcr.org/en/situations/rbwca","https://data.unhcr.org/en/situations/sahelcrisis","https://data.unhcr.org/en/situations/southeasterneurope","https://data.unhcr.org/en/situations/southsudan","https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/syria","https://data.unhcr.org/en/situations/syria_durable_solutions","https://data.unhcr.org/en/situations/ukraine_cccm","https://data.unhcr.org/en/situations/ukraine","https://data.unhcr.org/en/situations/vensit","https://data.unhcr.org/en/situations/ivorianreturnee","https://data.unhcr.org/en/situations/yemen_cccm"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>page_name<\/th>\n      <th>page_url<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## to retrieve the datasets for a specific country /situation</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="va">datasit</span> <span class="op">&lt;-</span> <span class="fu">odp</span><span class="op">(</span>page <span class="op">=</span> <span class="st">"Sudan situation"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># display results.. </span></span></span>
<span class="r-in"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">datasit</span>,</span></span>
<span class="r-in"><span>              options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<div id="htmlwidget-41f9a9f654c263d47f40" style="width:700px;height:432.632880098888px;" class="datatables html-widget "></div>
<script type="application/json" data-for="htmlwidget-41f9a9f654c263d47f40">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["situation","situation","situation","situation"],["Sudan situation","Sudan situation","Sudan situation","Sudan situation"],["https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/sudansituation","https://data.unhcr.org/en/situations/sudansituation"],["population","population","population","population"],["Total newly arrived refugees, asylum seekers, and returnees","Total newly arrived refugees/asylum seekers","Total newly arrived refugee returnees","IDPs in Sudan * "],["https://data.unhcr.org/population/?widget_id=414624&amp;sv_id=63&amp;population_group=5550,5551","https://data.unhcr.org/population/?widget_id=414625&amp;sv_id=63&amp;population_group=5550","https://data.unhcr.org/population/?widget_id=414626&amp;sv_id=63&amp;population_group=5551","https://data.unhcr.org/population/?widget_id=414627&amp;sv_id=63&amp;population_group=5552"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>page_type<\/th>\n      <th>page_name<\/th>\n      <th>page_url<\/th>\n      <th>dataset_type<\/th>\n      <th>dataset_name<\/th>\n      <th>dataset_url<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## to retrieve a specific dataset on the given page as a parsed JSON</span></span></span>
<span class="r-in"><span><span class="co"># odp(page, dataset)</span></span></span>
<span class="r-in"><span><span class="va">page</span> <span class="op">&lt;-</span> <span class="st">"Sudan situation"</span></span></span>
<span class="r-in"><span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="st">"population"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">datasitpop</span> <span class="op">&lt;-</span> <span class="fu">odp</span><span class="op">(</span>page <span class="op">=</span> <span class="va">page</span>,</span></span>
<span class="r-in"><span>               dataset <span class="op">=</span> <span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="co">## extract the data</span></span></span>
<span class="r-in"><span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span> <span class="st">"data"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co">## Bind together in a data frame</span></span></span>
<span class="r-in"><span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/list_c.html" class="external-link">list_rbind</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## plotting quickly the results... </span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">datasitpop</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{population_group_name} \n as of {date}"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                                        <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">individuals</span><span class="op">)</span> <span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           fill <span class="op">=</span> <span class="fu">unhcrthemes</span><span class="fu">::</span><span class="fu"><a href="https://vidonne.github.io/unhcrthemes/reference/unhcr_pal.html" class="external-link">unhcr_pal</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, <span class="st">"pal_blue"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           width <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">page</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       x <span class="op">=</span> <span class="st">"Number of people"</span>,</span></span>
<span class="r-in"><span>       y <span class="op">=</span> <span class="st">""</span>,</span></span>
<span class="r-in"><span>       caption <span class="op">=</span> <span class="st">"Source: https://data.unhcr.org/en/situations \n</span></span></span>
<span class="r-in"><span><span class="st">                   © UNHCR, The UN Refugee Agency"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     breaks <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pretty_breaks.html" class="external-link">pretty_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_number.html" class="external-link">label_number</a></span><span class="op">(</span>scale_cut <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/number.html" class="external-link">cut_short_scale</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">unhcrthemes</span><span class="fu">::</span><span class="fu"><a href="https://vidonne.github.io/unhcrthemes/reference/theme_unhcr.html" class="external-link">theme_unhcr</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>              font_size <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>              grid <span class="op">=</span> <span class="st">"X"</span>,</span></span>
<span class="r-in"><span>              axis <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="odp-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Hisham Galal, Edouard Legoupil.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

